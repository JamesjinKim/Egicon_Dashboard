{% extends "base.html" %}

{% block title %}메인 대시보드 - 센서 대시보드{% endblock %}

{% block content %}
    <!-- 센서별 독립 위젯 섹션 -->
    <div class="sensor-dashboard-container">
        
        <!-- SHT40 온습도 센서 섹션 -->
        <div class="sensor-section" id="sht40-section">
            <div class="sensor-section-header">
                <h3><i class="fas fa-thermometer-half"></i> SHT40 온습도 센서</h3>
                <div class="sensor-status-indicator" id="sht40-status">연결 대기중</div>
            </div>
            <div class="sensor-widgets-row">
                <div class="sensor-widget sht40-temperature">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-thermometer-half"></i>
                        </div>
                        <div class="widget-title">SHT40 온도</div>
                        <div class="widget-value" id="sht40-temp-value">--<span class="widget-unit">°C</span></div>
                    </div>
                </div>
                <div class="sensor-widget sht40-humidity">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-tint"></i>
                        </div>
                        <div class="widget-title">SHT40 습도</div>
                        <div class="widget-value" id="sht40-humidity-value">--<span class="widget-unit">%</span></div>
                    </div>
                </div>
            </div>
            <div class="sensor-charts-row">
                <div class="chart-card">
                    <div class="chart-header">SHT40 온도</div>
                    <div class="chart-container">
                        <canvas id="sht40-temperature-chart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">SHT40 습도</div>
                    <div class="chart-container">
                        <canvas id="sht40-humidity-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- BME688 환경센서 섹션 -->
        <div class="sensor-section" id="bme688-section">
            <div class="sensor-section-header">
                <h3><i class="fas fa-cloud"></i> BME688 환경센서</h3>
                <div class="sensor-status-indicator" id="bme688-status">연결 대기중</div>
            </div>
            <div class="sensor-widgets-row">
                <div class="sensor-widget bme688-temperature">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-thermometer-half"></i>
                        </div>
                        <div class="widget-title">BME688 온도</div>
                        <div class="widget-value" id="bme688-temp-value">--<span class="widget-unit">°C</span></div>
                    </div>
                </div>
                <div class="sensor-widget bme688-humidity">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-tint"></i>
                        </div>
                        <div class="widget-title">BME688 습도</div>
                        <div class="widget-value" id="bme688-humidity-value">--<span class="widget-unit">%</span></div>
                    </div>
                </div>
                <div class="sensor-widget bme688-pressure">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <div class="widget-title">BME688 절대압력</div>
                        <div class="widget-value" id="bme688-pressure-value">--<span class="widget-unit">hPa</span></div>
                    </div>
                </div>
                <div class="sensor-widget bme688-airquality">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <div class="widget-title">BME688 공기질</div>
                        <div class="widget-value" id="bme688-airquality-value">--<span class="widget-unit">/100</span></div>
                    </div>
                </div>
            </div>
            <div class="sensor-charts-row">
                <div class="chart-card">
                    <div class="chart-header">BME688 온도</div>
                    <div class="chart-container">
                        <canvas id="bme688-temperature-chart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">BME688 습도</div>
                    <div class="chart-container">
                        <canvas id="bme688-humidity-chart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">BME688 절대압력</div>
                    <div class="chart-container">
                        <canvas id="bme688-pressure-chart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">BME688 공기질</div>
                    <div class="chart-container">
                        <canvas id="bme688-airquality-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- SDP810 차압센서 섹션 -->
        <div class="sensor-section" id="sdp810-section">
            <div class="sensor-section-header">
                <h3><i class="fas fa-compress-alt"></i> SDP810 차압센서</h3>
                <div class="sensor-status-indicator" id="sdp810-status">연결 대기중</div>
            </div>
            <div class="sensor-widgets-row">
                <div class="sensor-widget sdp810-pressure">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-compress-alt"></i>
                        </div>
                        <div class="widget-title">SDP810 차압</div>
                        <div class="widget-value" id="sdp810-pressure-value">--<span class="widget-unit">Pa</span></div>
                    </div>
                </div>
            </div>
            <div class="sensor-charts-row">
                <div class="chart-card">
                    <div class="chart-header">SDP810 차압</div>
                    <div class="chart-container">
                        <canvas id="sdp810-pressure-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- BH1750 조도센서 섹션 -->
        <div class="sensor-section" id="bh1750-section">
            <div class="sensor-section-header">
                <h3><i class="fas fa-sun"></i> BH1750 조도센서</h3>
                <div class="sensor-status-indicator" id="bh1750-status">연결 대기중</div>
            </div>
            <div class="sensor-widgets-row">
                <div class="sensor-widget bh1750-light">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="widget-title">BH1750 조도</div>
                        <div class="widget-value" id="bh1750-light-value">--<span class="widget-unit">lux</span></div>
                    </div>
                </div>
            </div>
            <div class="sensor-charts-row">
                <div class="chart-card">
                    <div class="chart-header">BH1750 조도</div>
                    <div class="chart-container">
                        <canvas id="bh1750-light-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- SPS30 미세먼지센서 섹션 -->
        <div class="sensor-section" id="sps30-section">
            <div class="sensor-section-header">
                <h3><i class="fas fa-smog"></i> SPS30 미세먼지센서</h3>
                <div class="sensor-status-indicator" id="sps30-status">연결 대기중</div>
            </div>
            <div class="sensor-widgets-row">
                <div class="sensor-widget sps30-pm1">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <div class="widget-title">PM1.0</div>
                        <div class="widget-value" id="sps30-pm1-value">--<span class="widget-unit">μg/m³</span></div>
                    </div>
                </div>
                <div class="sensor-widget sps30-pm25">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-wind"></i>
                        </div>
                        <div class="widget-title">PM2.5</div>
                        <div class="widget-value" id="sps30-pm25-value">--<span class="widget-unit">μg/m³</span></div>
                    </div>
                </div>
                <div class="sensor-widget sps30-pm4">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-cloud"></i>
                        </div>
                        <div class="widget-title">PM4.0</div>
                        <div class="widget-value" id="sps30-pm4-value">--<span class="widget-unit">μg/m³</span></div>
                    </div>
                </div>
                <div class="sensor-widget sps30-pm10">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-smog"></i>
                        </div>
                        <div class="widget-title">PM10</div>
                        <div class="widget-value" id="sps30-pm10-value">--<span class="widget-unit">μg/m³</span></div>
                    </div>
                </div>
                <div class="sensor-widget sps30-airquality">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-lungs"></i>
                        </div>
                        <div class="widget-title">공기질 지수</div>
                        <div class="widget-value" id="sps30-airquality-value">--<span class="widget-unit">/100</span></div>
                    </div>
                </div>
            </div>
            <div class="sensor-charts-row">
                <div class="chart-card">
                    <div class="chart-header">PM1.0</div>
                    <div class="chart-container">
                        <canvas id="sps30-pm1-chart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">PM2.5</div>
                    <div class="chart-container">
                        <canvas id="sps30-pm25-chart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">PM4.0</div>
                    <div class="chart-container">
                        <canvas id="sps30-pm4-chart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">PM10</div>
                    <div class="chart-container">
                        <canvas id="sps30-pm10-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- 기타 센서 섹션 (진동 - 가상센서) -->
        <div class="sensor-section" id="virtual-section">
            <div class="sensor-section-header">
                <h3><i class="fas fa-wave-square"></i> 가상 센서</h3>
                <div class="sensor-status-indicator virtual">가상</div>
            </div>
            <div class="sensor-widgets-row">
                <div class="sensor-widget virtual-vibration">
                    <div class="widget-color-bar"></div>
                    <div class="widget-content">
                        <div class="widget-icon">
                            <i class="fas fa-wave-square"></i>
                        </div>
                        <div class="widget-title">진동 (가상)</div>
                        <div class="widget-value" id="virtual-vibration-value">0.00<span class="widget-unit">g</span></div>
                    </div>
                </div>
            </div>
            <div class="sensor-charts-row">
                <div class="chart-card">
                    <div class="chart-header">진동</div>
                    <div class="chart-container">
                        <canvas id="virtual-vibration-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- 통합 차트 섹션 -->
        <div class="sensor-section combined-section">
            <div class="sensor-section-header">
                <h3><i class="fas fa-chart-line"></i> 통합 센서 데이터</h3>
                <div class="sensor-status-indicator active">활성</div>
            </div>
            <div class="combined-chart-container">
                <div class="chart-card large-chart">
                    <div class="chart-header">모든 센서 데이터 통합</div>
                    <div class="chart-container" style="height: 300px;">
                        <canvas id="combined-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- 실시간 센서 로그 섹션 -->
        <div class="sensor-section log-section">
            <div class="sensor-section-header">
                <h3><i class="fas fa-terminal"></i> 실시간 센서 로그</h3>
                <div class="log-controls">
                    <button id="clear-log-btn" class="clear-log-btn">
                        <i class="fas fa-trash"></i> 로그 지우기
                    </button>
                    <button id="pause-log-btn" class="pause-log-btn">
                        <i class="fas fa-pause"></i> 일시정지
                    </button>
                </div>
            </div>
            <div class="log-container">
                <div class="log-output" id="sensor-log-output">
                    <div class="log-entry info">
                        <span class="log-timestamp">[시작]</span>
                        <span class="log-message">센서 로그 모니터링이 시작되었습니다.</span>
                    </div>
                </div>
            </div>
        </div>

    </div>
{% endblock %}

{% block scripts %}
    <style>
        .log-section {
            margin-top: 20px;
        }
        
        .log-controls {
            display: flex;
            gap: 10px;
        }
        
        .clear-log-btn, .pause-log-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .clear-log-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        .pause-log-btn {
            background-color: #f39c12;
            color: white;
        }
        
        .clear-log-btn:hover {
            background-color: #c0392b;
        }
        
        .pause-log-btn:hover {
            background-color: #e67e22;
        }
        
        .log-container {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 16px;
            margin-top: 10px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .log-output {
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.4;
        }
        
        .log-entry {
            padding: 4px 0;
            display: flex;
            gap: 10px;
        }
        
        .log-timestamp {
            color: #7f8c8d;
            font-weight: bold;
            min-width: 80px;
        }
        
        .log-message {
            flex: 1;
        }
        
        .log-entry.info .log-message {
            color: #3498db;
        }
        
        .log-entry.success .log-message {
            color: #2ecc71;
        }
        
        .log-entry.warning .log-message {
            color: #f39c12;
        }
        
        .log-entry.error .log-message {
            color: #e74c3c;
        }
    </style>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}